<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SECURE CONNECTION: VALENTINE</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <style>
        /* --- 1. VISUAL SETUP --- */
        :root {
            --neon-pink: #ff0055;
            --neon-blue: #00f3ff;
            --bg-dark: #050505;
            --glass-bg: rgba(10, 15, 20, 0.75);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background-color: var(--bg-dark);
            color: var(--neon-blue);
            font-family: 'Share Tech Mono', monospace;
            height: 100vh;
            width: 100vw;
            overflow: hidden; /* Prevents scrollbars when button moves */
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        /* --- 2. ANIMATED BACKGROUND --- */
        #network-canvas {
            position: absolute;
            top: 0; left: 0;
            z-index: 0;
            pointer-events: none;
        }

        .scanlines {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: linear-gradient(to bottom, rgba(255,255,255,0), rgba(255,255,255,0) 50%, rgba(0,0,0,0.2) 50%, rgba(0,0,0,0.2));
            background-size: 100% 4px;
            pointer-events: none;
            z-index: 5;
        }

        /* --- 3. MAIN INTERFACE CARD --- */
        .holo-card {
            position: relative;
            z-index: 10;
            width: 90%;
            max-width: 600px;
            padding: 40px 30px;
            background: var(--glass-bg);
            border: 1px solid var(--neon-blue);
            box-shadow: 0 0 25px rgba(0, 243, 255, 0.15);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-radius: 10px;
            text-align: center;
            clip-path: polygon(
                20px 0, 100% 0, 
                100% calc(100% - 20px), calc(100% - 20px) 100%, 
                0 100%, 0 20px
            );
            transition: all 0.5s ease;
        }

        h1 {
            font-family: 'Orbitron', sans-serif;
            font-size: clamp(1.8rem, 5vw, 2.8rem);
            color: white;
            text-shadow: 0 0 10px var(--neon-pink);
            margin-bottom: 15px;
            letter-spacing: 2px;
        }

        p.query {
            font-size: clamp(1rem, 3vw, 1.2rem);
            margin-bottom: 40px;
            line-height: 1.6;
            color: #ccc;
        }

        /* --- 4. BUTTONS --- */
        .btn-group {
            display: flex;
            justify-content: center;
            gap: 20px;
            min-height: 80px; /* Space for buttons */
            align-items: center;
        }

        button {
            background: rgba(0, 243, 255, 0.1);
            font-family: 'Orbitron', sans-serif;
            font-size: 1.1rem;
            padding: 15px 40px;
            border: 1px solid var(--neon-blue);
            color: var(--neon-blue);
            cursor: pointer;
            transition: 0.3s;
            text-transform: uppercase;
            letter-spacing: 2px;
            position: relative;
            overflow: hidden;
            z-index: 20;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        /* Yes Button Styling */
        #yes-btn {
            border-color: var(--neon-pink);
            color: var(--neon-pink);
            box-shadow: 0 0 10px rgba(255, 0, 85, 0.2);
        }
        
        #yes-btn:hover {
            background: var(--neon-pink);
            color: white;
            box-shadow: 0 0 30px var(--neon-pink);
            transform: scale(1.05);
        }

        /* No Button Styling */
        #no-btn {
            transition: 0.1s; /* Faster transition for jumping */
        }

        /* --- 5. SUCCESS TERMINAL (Hidden initially) --- */
        #terminal-overlay {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 100;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 1s;
        }

        #terminal-overlay.active {
            opacity: 1;
            pointer-events: all;
        }

        .terminal-window {
            width: 90%;
            max-width: 700px;
            border: 1px solid var(--neon-blue);
            background: rgba(0, 15, 30, 0.95);
            padding: 25px;
            font-family: 'Share Tech Mono', monospace;
            box-shadow: 0 0 40px rgba(0, 243, 255, 0.15);
            position: relative;
        }

        /* Blinking Cursor */
        .cursor {
            display: inline-block;
            width: 10px;
            height: 18px;
            background: var(--neon-pink);
            animation: blink 1s infinite;
        }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }

    </style>
</head>
<body>

    <div class="scanlines"></div>
    <canvas id="network-canvas"></canvas>

    <div class="holo-card" id="main-interface">
        <div style="color: var(--neon-pink); font-size: 0.8rem; margin-bottom: 20px; border-bottom: 1px solid rgba(255,0,85,0.3); display:inline-block;">
            SYSTEM ALERT: CRITICAL QUESTION
        </div>
        
        <h1>VALENTINE.EXE</h1>
        
        <p class="query">
            Target User: <strong>MY_LOVE</strong><br>
            Action: Requesting permission to be your Valentine.<br>
            <br>
            <span style="font-size: 0.9rem; opacity: 0.7;">> Do you accept the terms of eternal affection?</span>
        </p>

        <div class="btn-group">
            <button id="yes-btn">ACCEPT [Y]</button>
            <button id="no-btn">DECLINE [N]</button>
        </div>
    </div>

    <div id="terminal-overlay">
        <div class="terminal-window">
            <div style="display: flex; justify-content: space-between; border-bottom: 1px solid var(--neon-blue); margin-bottom: 15px; padding-bottom: 5px; color: var(--neon-blue); font-size: 0.8rem;">
                <span>STATUS: ENCRYPTED</span>
                <span>PROTOCOL: HAPPINESS</span>
            </div>
            <div id="typewriter-area" style="color: white; font-size: 1.1rem; line-height: 1.6; min-height: 200px;">
                <span class="cursor"></span>
            </div>
        </div>
    </div>

    <script>
        /* --- 1. SETUP CANVAS BACKGROUND --- */
        const canvas = document.getElementById('network-canvas');
        const ctx = canvas.getContext('2d');
        
        // Auto-resize canvas
        const resizeCanvas = () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        };
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        // Simple star/particle field
        const stars = Array.from({ length: 100 }, () => ({
            x: Math.random() * canvas.width,
            y: Math.random() * canvas.height,
            size: Math.random() * 2,
            speed: Math.random() * 0.5
        }));

        function animateBackground() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = '#00f3ff';
            
            stars.forEach(star => {
                star.y += star.speed;
                if(star.y > canvas.height) star.y = 0;
                ctx.beginPath();
                ctx.arc(star.x, star.y, star.size, 0, Math.PI * 2);
                ctx.fill();
            });
            requestAnimationFrame(animateBackground);
        }
        animateBackground();


        /* --- 2. THE "NO" BUTTON LOGIC (THE FIX) --- */
        const noBtn = document.getElementById('no-btn');
        const yesBtn = document.getElementById('yes-btn');

        // Texts to show when it jumps
        const errorTexts = ["ERROR", "DENIED", "TRY AGAIN", "NOPE", "404", "LOCKED"];

        const teleportButton = (e) => {
            // 1. STOP the click immediately
            if(e) {
                e.preventDefault(); 
                e.stopPropagation();
            }

            // 2. Calculate Safe Boundaries (View Height/Width - Button Size - Padding)
            const padding = 20;
            const btnWidth = noBtn.offsetWidth;
            const btnHeight = noBtn.offsetHeight;
            
            const maxWidth = window.innerWidth - btnWidth - padding;
            const maxHeight = window.innerHeight - btnHeight - padding;

            // 3. Generate Random Coordinates
            // Math.max ensures it doesn't go off the top/left edge
            const newX = Math.max(padding, Math.random() * maxWidth);
            const newY = Math.max(padding, Math.random() * maxHeight);

            // 4. Apply New Position
            noBtn.style.position = 'fixed'; // Switch to fixed positioning
            noBtn.style.left = newX + 'px';
            noBtn.style.top = newY + 'px';
            
            // 5. Visual Effects (Change Text & Color)
            noBtn.innerText = errorTexts[Math.floor(Math.random() * errorTexts.length)];
            noBtn.style.borderColor = "red";
            noBtn.style.color = "red";
            
            // 6. Encourage the Yes button
            yesBtn.style.transform = "scale(1.2)";
            setTimeout(() => yesBtn.style.transform = "scale(1)", 500);
        };

        // EVENT LISTENERS FOR THE NO BUTTON
        // Desktop: Jump on hover
        noBtn.addEventListener('mouseover', teleportButton);
        // Mobile: Jump on touch start (before release)
        noBtn.addEventListener('touchstart', teleportButton, { passive: false });
        // Fallback: If they somehow click it, jump anyway
        noBtn.addEventListener('click', teleportButton);


        /* --- 3. THE "YES" BUTTON LOGIC --- */
        const mainInterface = document.getElementById('main-interface');
        const terminalOverlay = document.getElementById('terminal-overlay');
        const typewriterArea = document.getElementById('typewriter-area');

        // The Love Letter
        const messageLines = [
            "> Connecting to heart_server...",
            "> Connection ESTABLISHED.",
            "> ---------------------------",
            "> SUBJECT: I Love You",
            "> You are the best thing that ever",
            "> happened to my system.",
            "> My life is buggy without you.",
            "> Will you be my Player 2 forever?",
            "> ---------------------------",
            "> STATUS: HAPPILY EVER AFTER."
        ];

        yesBtn.addEventListener('click', () => {
            // Hide Question Card
            mainInterface.style.transform = "scale(0.1)";
            mainInterface.style.opacity = "0";
            
            setTimeout(() => {
                mainInterface.style.display = "none";
                terminalOverlay.classList.add('active');
                
                // Start Typing Effect
                startTyping(0);
                // Start Matrix Rain
                createMatrixRain();
            }, 500);
        });

        function startTyping(lineIndex) {
            if (lineIndex < messageLines.length) {
                const line = document.createElement('div');
                line.style.marginBottom = "5px";
                
                // Color coding specific lines
                if(messageLines[lineIndex].includes("ESTABLISHED") || messageLines[lineIndex].includes("STATUS")) {
                    line.style.color = "#00ff00"; // Green
                } else if (messageLines[lineIndex].includes("Love")) {
                    line.style.color = "var(--neon-pink)";
                }

                // Insert before cursor
                typewriterArea.insertBefore(line, typewriterArea.querySelector('.cursor'));

                let charIndex = 0;
                const typeChar = () => {
                    if (charIndex < messageLines[lineIndex].length) {
                        line.textContent += messageLines[lineIndex].charAt(charIndex);
                        charIndex++;
                        setTimeout(typeChar, 30); // Typing speed
                    } else {
                        setTimeout(() => startTyping(lineIndex + 1), 400); // Wait before next line
                    }
                };
                typeChar();
            }
        }

        /* --- 4. BONUS: MATRIX RAIN EFFECT --- */
        function createMatrixRain() {
            setInterval(() => {
                const heart = document.createElement('div');
                heart.innerHTML = Math.random() > 0.5 ? 'â¤' : '1';
                heart.style.position = 'fixed';
                heart.style.left = Math.random() * 100 + 'vw';
                heart.style.top = '-20px';
                heart.style.color = Math.random() > 0.5 ? '#ff0055' : '#00f3ff';
                heart.style.fontSize = Math.random() * 20 + 10 + 'px';
                heart.style.zIndex = '101'; // Above terminal
                heart.style.opacity = '0.7';
                
                document.body.appendChild(heart);

                const duration = Math.random() * 2000 + 2000;
                const anim = heart.animate([
                    { transform: 'translateY(0)' },
                    { transform: 'translateY(110vh)' }
                ], {
                    duration: duration,
                    easing: 'linear'
                });

                anim.onfinish = () => heart.remove();
            }, 100);
        }

    </script>
</body>
</html>
